''' Задание:
Разработать программу для решения биквадратного уравнения.

Программа должна быть разработана в виде консольного приложения на языке Python.
Программа осуществляет ввод с клавиатуры коэффициентов А, В, С, вычисляет дискриминант и ДЕЙСТВИТЕЛЬНЫЕ корни уравнения (в зависимости от дискриминанта).
Коэффициенты А, В, С могут быть заданы в виде параметров командной строки ( вариант задания параметров приведен в конце файла с примером кода ). 
Если они не заданы, то вводятся с клавиатуры в соответствии с пунктом 2. Описание работы с параметрами командной строки.
Если коэффициент А, В, С введен или задан в командной строке некорректно, то необходимо проигнорировать некорректное значение и вводить коэффициент повторно пока коэффициент не будет введен корректно. Корректно заданный коэффициент - это коэффициент, значение которого может быть без ошибок преобразовано в действительное число.'''
import sys
import math

def get_coef(index, prompt):
    '''
    Читаем коэффициент из командной строки или вводим с клавиатуры

    Args:
        index (int): Номер параметра в командной строке
        prompt (str): Приглашение для ввода коэффициента

    Returns:
        float: Коэффициент биквадратного уравнения
    '''
    while True:
        try:
            # Пробуем прочитать коэффициент из командной строки
            if len(sys.argv) > index:
                coef_str = sys.argv[index]
                print(f"Коэффициент из командной строки: {coef_str}")
            else:
                # Вводим с клавиатуры
                print(prompt)
                coef_str = input()
            
            # Переводим строку в действительное число
            coef = float(coef_str)
            return coef
        except (ValueError, IndexError):
            # Если преобразование не удалось или индекс вне диапазона
            print("Ошибка: введите корректное действительное число")
            # Если была ошибка при чтении из командной строки, 
            # переходим к вводу с клавиатуры для последующих попыток
            if len(sys.argv) > index:
                # Удаляем некорректный аргумент, чтобы в следующий раз вводить с клавиатуры
                if index < len(sys.argv):
                    sys.argv = sys.argv[:index] + sys.argv[index+1:]

def solve_biquadratic(a, b, c):
    '''
    Вычисление действительных корней биквадратного уравнения a*x^4 + b*x^2 + c = 0

    Args:
        a (float): коэффициент А
        b (float): коэффициент B
        c (float): коэффициент C

    Returns:
        list[float]: Список действительных корней
    '''
    result = []
    
    # Проверка на нулевой коэффициент A
    if a == 0:
        # Уравнение становится квадратным: b*x^2 + c = 0
        if b == 0:
            # Уравнение становится линейным: c = 0
            if c == 0:
                # Бесконечное количество решений
                return ["Любое действительное число"]
            else:
                # Нет решений
                return []
        else:
            # Квадратное уравнение относительно x^2
            x_squared = -c / b
            if x_squared > 0:
                root1 = math.sqrt(x_squared)
                root2 = -math.sqrt(x_squared)
                result.append(root1)
                result.append(root2)
            elif x_squared == 0:
                result.append(0.0)
            # Если x_squared < 0 - нет действительных корней
        return result
    
    # Вычисляем дискриминант для квадратного уравнения относительно y = x^2
    # Уравнение: a*y^2 + b*y + c = 0
    D = b*b - 4*a*c
    
    if D < 0:
        # Нет действительных корней для y = x^2
        return result
    elif D == 0:
        # Один корень для y = x^2
        y = -b / (2.0 * a)
        if y > 0:
            # Два корня для x
            root1 = math.sqrt(y)
            root2 = -math.sqrt(y)
            result.append(root1)
            result.append(root2)
        elif y == 0:
            # Один корень для x
            result.append(0.0)
        # Если y < 0 - нет действительных корней
    else:
        # Два корня для y = x^2
        sqrt_D = math.sqrt(D)
        y1 = (-b + sqrt_D) / (2.0 * a)
        y2 = (-b - sqrt_D) / (2.0 * a)
        
        # Для каждого положительного y находим корни x
        if y1 > 0:
            root1 = math.sqrt(y1)
            root2 = -math.sqrt(y1)
            result.append(root1)
            result.append(root2)
        elif y1 == 0:
            result.append(0.0)
            
        if y2 > 0:
            root3 = math.sqrt(y2)
            root4 = -math.sqrt(y2)
            # Проверяем на дубликаты (может быть, если y1 = y2)
            if root3 not in result:
                result.append(root3)
            if root4 not in result:
                result.append(root4)
        elif y2 == 0 and 0.0 not in result:
            result.append(0.0)
    
    # Сортируем корни для удобства вывода
    result.sort()
    return result

def main():
    '''
    Основная функция
    '''
    print("Решение биквадратного уравнения A*x^4 + B*x^2 + C = 0")
    
    a = get_coef(1, 'Введите коэффициент А:')
    b = get_coef(2, 'Введите коэффициент B:')
    c = get_coef(3, 'Введите коэффициент C:')
    
    print(f"\nУравнение: {a}*x^4 + {b}*x^2 + {c} = 0")
    
    # Вычисление корней
    roots = solve_biquadratic(a, b, c)
    
    # Вывод корней
    print("\nРезультат:")
    if not roots:
        print('Действительных корней нет')
    elif roots == ["Любое действительное число"]:
        print('Уравнение имеет бесконечное количество решений: любое действительное число')
    else:
        len_roots = len(roots)
        if len_roots == 1:
            print('Один корень: {:.6f}'.format(roots[0]))
        elif len_roots == 2:
            print('Два корня: {:.6f} и {:.6f}'.format(roots[0], roots[1]))
        elif len_roots == 3:
            print('Три корня: {:.6f}, {:.6f} и {:.6f}'.format(roots[0], roots[1], roots[2]))
        elif len_roots == 4:
            print('Четыре корня: {:.6f}, {:.6f}, {:.6f} и {:.6f}'.format(roots[0], roots[1], roots[2], roots[3]))

# Если сценарий запущен из командной строки
if __name__ == "__main__":
    main()
